<%= flash[:notice] %>
<div class='container'>
    <div class='row'>
        <h2>注文履歴一覧</h2>
            <table class='table'>
                <thead>
                    <tr class='table-name'>
                        <th>購入日時</th>
                        <th>購入者</th>
                        <th>注文個数</th>
                        <th>注文ステータス</th>
                    </tr>
                </thead>
                <tbody>
                     <% @orders.each do |order| %>
                     
                    <tr>
                        <td><%= link_to admin_order_path(order.id) do %>
                        <%= order.created_at %>
                        <% end %></td>
                
                        <td><%= order.customer.family_name + order.customer.first_name %></td>
                        
                        <!--orderの子要素のorder_detailのquantityカラム呼び出し-->
                        <% @sum= 0  %>
                        <% order.order_details.each do |order_detail| %>
                        <% @sum += order_detail.quantity %>
                        <% end %>
                           <td><%= @sum %></td>
                        
                        <td><%= order.status %></td>
                    </tr>
                    <% end %>
                </tbody>
            </table>
    </div>
</div>